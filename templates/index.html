<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Management Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
</head>

<body>
    <div id="toast" class="toast"></div>

    <div id="confirmModal" class="modal">
        <div class="modal-box">
            <h3>Confirm Deletion</h3>
            <p>This action cannot be undone.</p>
            <div class="modal-actions">
                <button onclick="closeConfirm()" class="btn cancel">Cancel</button>
                <button onclick="confirmDelete()" class="btn danger">Delete</button>
            </div>
        </div>
    </div>


    <div class="sidebar">
        <h1>School Admin</h1>
        <button class="nav-btn active" onclick="showPage('dashboard')">üìä Dashboard</button>
        <button class="nav-btn" onclick="showPage('students')">üë• Manage Students</button>
        <button class="nav-btn" onclick="showPage('fees')">üí∞ Fee Status</button>
        <button class="nav-btn" onclick="showPage('performance')">üìà Class Performance</button>
        <button class="nav-btn" onclick="showPage('teachers')">üë®‚Äçüè´ Manage Teachers</button>
        <button class="nav-btn" onclick="showPage('school')">üìÖ School Info</button>
    </div>

    <div class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboard" class="page active">
            <h2>Dashboard Overview</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="number" id="totalStudents">0</div>
                    <h3>Total Students</h3>
                </div>
                <div class="stat-card">
                    <div class="number" id="totalTeachers">0</div>
                    <h3>Total Teachers</h3>
                </div>
                <div class="stat-card">
                    <div class="number" id="totalFees">$0</div>
                    <h3>Fee Collection</h3>
                </div>
            </div>
            <div class="chart-grid">
                <div class="card">
                    <h3>Fee Status Distribution</h3>
                    <div class="chart-container">
                        <canvas id="feeChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3>Recent Activities</h3>
                    <div class="event-list">
                        <div class="event-item">üìù New student enrolled</div>
                        <div class="event-item">üíµ Fee payment received</div>
                        <div class="event-item">üìÖ Event scheduled</div>
                        <div class="event-item">üë®‚Äçüè´ New teacher added</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Students Page -->
        <div id="students" class="page">
            <h2>Manage Students</h2>
            <div class="card" id="studentForm">
                <h3 id="addlabel">Add New Student</h3>
                <h3 id="updatelabel" style="display: none;">Update Student</h3>
                <div class="form-grid">
                    <label style="font-size:16px;">Name
                        <input type="text" id="studentName" placeholder="Student Name" style="margin:5px 0;">
                    </label>

                    <label style="font-size:16px;">Date of Birth
                        <input type="date" id="studentDOB" style="margin:5px 0;">
                    </label>

                    <label style="font-size:16px;">Gender
                        <select id="studentGender" required style="margin:5px 0;">
                            <option value="male">üöπMale</option>
                            <option value="female">üö∫Female</option>
                            <option value="other">Other</option>
                        </select>
                    </label>

                    <label id="classheading" style="font-size:16px;">Class
                        <select id="addstudentclass" required style="margin:5px 0;">
                            <option value="9">9</option>
                            <option value="10">10</option>
                        </select>
                    </label>

                    <label style="font-size:16px;">Section
                        <input type="text" id="section" placeholder="e.g., A" style="margin:5px 0;">
                    </label>

                    <label id="rollheading" style="font-size:16px;">Roll Number
                        <input type="text" id="rollNumber" placeholder="e.g., A-123" style="margin:5px 0;">
                    </label>

                    <label style="font-size:16px;">Session
                        <input type="text" id="session" placeholder="e.g., 2024-25" style="margin:5px 0;">
                    </label>

                    <label style="font-size:16px;">Total Fee
                        <input type="number" id="totalFee" placeholder="e.g., 2000" style="margin:5px 0;">
                    </label>
                </div>

                <h3 style="font-size:18px;">Father/Guardian info</h3>

                <div class="form-grid">
                    <label style="font-size:16px;">Name
                        <input type="text" id="fatherName" placeholder="Full Name" style="margin:5px 0;">
                    </label>


                    <label style="font-size:16px;">Phone Number
                        <input type="text" id="phone" placeholder="e.g., 1234567890" style="margin:5px 0;">
                    </label>

                </div>

                <button class="btn btn-primary" style="background: green;"
                    onmouseover="this.style.background='darkgreen'" onmouseout="this.style.background='green'"
                    type="submit" id="addBtn" onclick="addStudent()">Add Student</button>

                <button class="btn btn-primary" id="updateBtn" style="display:none"
                    onclick="updateStudent(event)">Update Student</button>

                <button class="btn btn-primary" type="button" id="cancelBtn" style="display:none; background: #991b1b"
                    onclick="cancelUpdate()">
                    Cancel
                </button>
            </div>


            <div class="card" id="deletestudentscard">
                <h3>Delete a Student</h3>
                <div class="form-grid">

                    <h3 style="font-size: 16px;"> Class
                        <select style="margin: 5px 0;" name="status" id="deletestudentclass" required>

                            <option value="9">
                                9
                            </option>
                            <option value="10">
                                10
                            </option>
                        </select>
                    </h3>
                    <h3 style="font-size: 16px"> Section
                        <input style="margin: 5px 0;" type="text" id="Section" placeholder="e.g., A">
                    </h3>
                    <h3 style="font-size: 16px"> Roll Number
                        <input style="margin: 5px 0;" type="text" id="Rollnumber" placeholder="e.g., A-123">
                    </h3>
                </div>
                <button class="btn btn-primary" style="background-color: #991b1b;"
                    onmouseover="this.style.background='darkred'" onmouseout="this.style.background='#991b1b'"
                    onclick="openConfirm()">Delete
                    Student</button>
                <button class="btn btn-primary" type="button" id="canceldeleteBtn"
                    style="display:none; background: #0044d6" onclick="canceldelete()">
                    Cancel Delete
                </button>

            </div>


            <div class="card">
                <h3>Students List</h3>

                <div style="display:flex; gap:10px; align-items:center; margin-bottom:12px;">

                    <select style="width: 30%;" id="classfetchfilter">
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                    </select>
                    <input style="margin: 5px 20px;" id="rollfetchfilter" placeholder="Roll num (Optional)">

                    <button onclick="fetchStudents()" class="btn btn-primary">
                        Refresh
                    </button>

                </div>

                <table id="studentTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Class</th>
                            <th>Section</th>
                            <th>Roll number</th>
                            <th>Gender</th>
                            <th>Father/Gaurdian</th>
                            <th style="display: flex; align-items: center; justify-content: center; ">Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Fees Page -->
        <div id="fees" class="page">
            <h2>Fee Status Management</h2>

            <div class="card">
                <h3>Add Record</h3>
                <div class="form-grid">
                    
                    <h3 style="font-size: 16px;"> Class
                        <select style="margin: 5px 0;" name="status" id="classforfee" required>

                            <option value="9">
                                9
                            </option>
                            <option value="10">
                                10
                            </option>
                        </select>
                    </h3>
                    <h3 style="font-size: 16px"> Section
                        <input style="margin: 5px 0;" type="text" id="Sectionforfee" placeholder="e.g., A">
                    </h3>
                    <h3 style="font-size: 16px"> Roll Number
                        <input style="margin: 5px 0;" type="text" id="Rollnumberforfee" placeholder="e.g., A-123">
                    </h3>
                    <h3 style="font-size: 16px"> Date
                        <input style="margin: 5px 0;" type="date" id="feedate" placeholder="MM/DD/YYYY">
                    </h3>
                    <h3 style="font-size: 16px;"> Month
                        <select style="margin: 5px 0;" id="feemonth" required>

                            <option value="january">
                                January
                            </option>
                            <option value="feburary">
                                Feburary
                            </option>
                            <option value="march">
                                March
                            </option>
                            <option value="april">
                                April
                            </option>
                            <option value="may">
                                May
                            </option>
                            <option value="june">
                                June
                            </option>
                            <option value="july">
                                July
                            </option>
                            <option value="august">
                                August
                            </option>
                            <option value="september">
                                September
                            </option>
                            <option value="october">
                                October
                            </option>
                            <option value="november">
                                November
                            </option>
                            <option value="december">
                                December
                            </option>
                        </select>
                    </h3>
                    <h3 style="font-size: 16px"> Amount
                        <input style="margin: 5px 0;" type="number" id="amount">
                    </h3>
                    <h3 style="font-size: 16px;"> Payment
                        <select style="margin: 5px 0;" id="paymentmethod" required>

                            <option value="cash">
                                Cash
                            </option>
                            <option value="online">
                                Online
                            </option>
                        </select>
                    </h3>
                </div>
                <button class="btn btn-primary" style="background-color: green;" onclick="addfee()">Add</button>

            </div>

            <div class="card" id="showfeetable" style="display: none; border-radius: 30px;">
                 <div style="display:flex; gap:10px; align-items:center; margin-bottom:12px;">

                </div>
                <table id="feeTable">
                    <thead id="tablehead">
                        <tr>
                            <th style="border-top-left-radius: 20px;">Name</th>
                            <th>Class</th>
                            <th>Roll no.</th>
                            <th>Month</th>
                            <th>Amount Paid</th>
                            <th>Paid on</th>
                            <th style="border-top-right-radius: 20px;">Dues</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Performance Page -->
        <div id="performance" class="page">
            <h2>Class Performance</h2>
            <div class="chart-grid">
                <div class="card">
                    <h3>Average Scores by Class</h3>
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3>Student Count by Class</h3>
                    <div class="chart-container">
                        <canvas id="studentCountChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="card">
                <h3>Class Details</h3>
                <table id="performanceTable">
                    <thead>
                        <tr>
                            <th>Class</th>
                            <th>Average Score</th>
                            <th>Total Students</th>
                            <th>Performance</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Teachers Page -->
        <div id="teachers" class="page">
            <h2>Manage Teachers</h2>
            <div class="card">
                <h3>Add New Teacher</h3>
                <div class="form-grid">
                    <input type="text" id="teacherName" placeholder="Teacher Name">
                    <input type="text" id="teacherSubject" placeholder="Subject">
                    <input type="text" id="teacherClass" placeholder="Class">
                    <button class="btn btn-primary" onclick="addTeacher()">Add Teacher</button>
                </div>
            </div>
            <div class="card">
                <h3>Teacher List</h3>
                <table id="teacherTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Subject</th>
                            <th>Class</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>


        <!-- School Info Page -->
        <div id="school" class="page">
            <h2>School Information</h2>
            <div class="chart-grid">
                <div class="card">
                    <h3>‚è∞ School Timings</h3>
                    <input type="text" id="schoolTimings" value="8:00 AM - 2:00 PM">
                    <button class="btn btn-primary" style="margin-top: 15px;" onclick="updateTimings()">Update
                        Timings</button>
                </div>
                <div class="card">
                    <h3>üìÖ Add Event</h3>
                    <input type="text" id="eventInput" placeholder="Enter event">
                    <button class="btn btn-success" style="margin-top: 15px;" onclick="addEvent()">Add Event</button>
                </div>
            </div>
            <div class="chart-grid">
                <div class="card">
                    <h3>Upcoming Events</h3>
                    <ul class="event-list" id="eventList"></ul>
                </div>
                <div class="card">
                    <h3>Schedules</h3>
                    <ul class="event-list" id="scheduleList"></ul>
                </div>
            </div>
        </div>
    </div>


    <script src="{{url_for('static', filename='script.js')}}">
    
    </script>
</body>

</html>